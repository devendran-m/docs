"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[1978],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return u}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),l=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},d=function(e){var n=l(e.components);return a.createElement(i.Provider,{value:n},e.children)},f={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(t),u=r,b=p["".concat(i,".").concat(u)]||p[u]||f[u]||o;return t?a.createElement(b,c(c({ref:n},d),{},{components:t})):a.createElement(b,c({ref:n},d))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,c=new Array(o);c[0]=p;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s.mdxType="string"==typeof e?e:r,c[1]=s;for(var l=2;l<o;l++)c[l]=t[l];return a.createElement.apply(null,c)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},7175:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return i},default:function(){return u},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return f}});var a=t(3117),r=t(102),o=(t(7294),t(3905)),c=["components"],s={},i="Direct Token Transfer",l={unversionedId:"workflow/transfer-workflow",id:"workflow/transfer-workflow",title:"Direct Token Transfer",description:"This workflow describes how to use the Casper command-line client to transfer tokens between accounts on the Casper Network.",source:"@site/source/docs/casper/workflow/transfer-workflow.md",sourceDirName:"workflow",slug:"/workflow/transfer-workflow",permalink:"/workflow/transfer-workflow",editUrl:"https://github.com/casper-network/docs/tree/main/source/docs/casper/workflow/transfer-workflow.md",tags:[],version:"current",frontMatter:{},sidebar:"workflow",previous:{title:"Introduction",permalink:"/workflow/transfers"},next:{title:"Transferring Tokens using a Multi-sig Deploy",permalink:"/workflow/deploy-transfer"}},d={},f=[{value:"Transfer",id:"transfer",level:2},{value:"Deploy Status",id:"deploy-status",level:3}],p={toc:f};function u(e){var n=e.components,t=(0,r.Z)(e,c);return(0,o.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"direct-token-transfer"},"Direct Token Transfer"),(0,o.kt)("p",null,"This workflow describes how to use the Casper command-line client to transfer tokens between accounts on the Casper Network."),(0,o.kt)("p",null,"This workflow assumes:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"You meet the ",(0,o.kt)("a",{parentName:"li",href:"/workflow/setup"},"prerequisites")),(0,o.kt)("li",{parentName:"ol"},"You are using the Casper command-line client"),(0,o.kt)("li",{parentName:"ol"},"You have a target ",(0,o.kt)("em",{parentName:"li"},"public key")," hex the path to the source ",(0,o.kt)("em",{parentName:"li"},"secret key")),(0,o.kt)("li",{parentName:"ol"},"You have a valid ",(0,o.kt)("em",{parentName:"li"},"node-address")),(0,o.kt)("li",{parentName:"ol"},"You must be able to sign a deploy for the source account")),(0,o.kt)("h2",{id:"transfer"},"Transfer"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"transfer")," command allows you to move CSPR from one account to another as denominated in ",(0,o.kt)("a",{parentName:"p",href:"/design/tokens#divisibility-of-tokens"},"Motes"),". A ",(0,o.kt)("em",{parentName:"p"},"Mote")," is a denomination of the cryptocurrency CSPR, where 1 CSPR = 1,000,000,000 Motes."),(0,o.kt)("p",null,"For transfers of at least 2.5 CSPR (2,500,000,000 Motes) from a single sender to a single recipient on a Casper network, the most efficient option is to use the direct transfer capability."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Direct transfer example"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"casper-client transfer \\\n--id 1 \\\n--transfer-id 123456789012345 \\\n--node-address http://<node-ip-address>:7777 \\\n--amount <amount-to-transfer> \\\n--secret-key <source-account-secret-key>.pem \\\n--chain-name casper \\\n--target-account <hex-encoded-target-account-public-key> \\\n--payment-amount 10000\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Request fields:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"id")," - Optional JSON-RPC identifier applied to the request and returned in the response. If not provided, a random integer will be assigned")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"transfer-id")," -<64-BIT INTEGER> The ",(0,o.kt)("inlineCode",{parentName:"p"},"transfer-id")," is a memo field, providing additional information about the recipient, which is necessary when transferring tokens to some recipients. For example, if depositing tokens into an account where off-chain management keeps track of individual sub-balances, it is necessary to provide a memo id uniquely identifying the actual recipient. If this is not necessary for a given recipient, you may pass ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," or some ",(0,o.kt)("inlineCode",{parentName:"p"},"u64")," value that is meaningful to you")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"node-address")," - Hostname or IP and port of a node on a network bound to a JSON-RPC endpoint ","[","default:",(0,o.kt)("a",{parentName:"p",href:"http://localhost:7777"},"http://localhost:7777"),"]")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"amount")," -<512-BIT INTEGER> The number of motes to transfer (1 CSPR = 1,000,000,000 ",(0,o.kt)("inlineCode",{parentName:"p"},"Motes"),")")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"secret-key")," - Path to secret key file")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"chain-name")," - Name of the chain, to avoid the deploy from being accidentally or maliciously included in a different chain"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("em",{parentName:"li"},"chain-name")," for testnet is ",(0,o.kt)("strong",{parentName:"li"},"casper-test")),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("em",{parentName:"li"},"chain-name")," for mainnet is ",(0,o.kt)("strong",{parentName:"li"},"casper")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"target-account")," - Hex-encoded public key of the account from which the main purse will be used as the target"))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Important response fields:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'"result"."deploy_hash"')," - the address of the executed transfer, needed to look up additional information about the transfer")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note"),": Save the returned ",(0,o.kt)("em",{parentName:"p"},"deploy_hash")," from the output to query information about the transfer deploy later."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Explore the JSON-RPC request and response generated."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"JSON-RPC Request"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id": 1,\n    "jsonrpc": "2.0",\n    "method": "account_put_deploy",\n    "params": {\n        "deploy": {\n            "approvals": [\n                {\n                    "signature": "130 chars",\n                    "signer": "010f50b0116f213ef65b99d1bd54483f92bf6131de2f8aceb7e3f825a838292150"\n                }\n            ],\n            "hash": "ec2d477a532e00b08cfa9447b7841a645a27d34ee12ec55318263617e5740713",\n            "header": {\n                "account": "010f50b0116f213ef65b99d1bd54483f92bf6131de2f8aceb7e3f825a838292150",\n                "body_hash": "da35b095640a403324306c59ac6f18a446dfcc28faf753ce58b96b635587dd8e",\n                "chain_name": "casper-net-1",\n                "dependencies": [],\n                "gas_price": 1,\n                "timestamp": "2021-04-20T18:04:40.333Z",\n                "ttl": "1h"\n            },\n            "payment": {\n                "ModuleBytes": {\n                    "args": [\n                        [\n                            "amount",\n                            {\n                                "bytes": "021027",\n                                "cl_type": "U512",\n                                "parsed": "10000"\n                            }\n                        ]\n                    ],\n                    "module_bytes": ""\n                }\n            },\n            "session": {\n                "Transfer": {\n                    "args": [\n                        [\n                            "amount",\n                            {\n                                "bytes": "0400f90295",\n                                "cl_type": "U512",\n                                "parsed": "2500000000"\n                            }\n                        ],\n                        [\n                            "target",\n                            {\n                                "bytes": "8ae68a6902ff3c029cea32bb67ae76b25d26329219e4c9ceb676745981fd3668",\n                                "cl_type": {\n                                    "ByteArray": 32\n                                },\n                                "parsed": "8ae68a6902ff3c029cea32bb67ae76b25d26329219e4c9ceb676745981fd3668"\n                            }\n                        ],\n                        [\n                            "id",\n                            {\n                                "bytes": "00",\n                                "cl_type": {\n                                    "Option": "U64"\n                                },\n                                "parsed": null\n                            }\n                        ]\n                    ]\n                }\n            }\n        }\n    }\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"JSON-RPC Response"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id": 1,\n    "jsonrpc": "2.0",\n    "result": {\n        "api_version": "1.0.0",\n        "deploy_hash": "ec2d477a532e00b08cfa9447b7841a645a27d34ee12ec55318263617e5740713"\n    }\n}\n'))),(0,o.kt)("h3",{id:"deploy-status"},"Deploy Status"),(0,o.kt)("p",null,"A transfer on a Casper Network is only executed after it has been included in a finalized block."),(0,o.kt)("p",null,"Refer to the Section on ",(0,o.kt)("a",{parentName:"p",href:"/workflow/querying#deploy-status"},"querying deploys")," within the network to check the execution status of the transfer."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Important response fields:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'"result"."execution_results"[0]."transfers[0]"')," - the address of the executed transfer that the source account initiated. We will use it to look up additional information about the transfer"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'"result"."execution_results"[0]."block_hash"')," - contains the block hash of the block that included our transfer. We will require the ",(0,o.kt)("em",{parentName:"li"},"state_root_hash")," of this block to look up information about the accounts and their balances")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note"),": Transfer addresses use a ",(0,o.kt)("inlineCode",{parentName:"p"},"transfer-")," string prefix."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Explore the JSON-RPC request and response generated."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"JSON-RPC Request"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id": 2,\n    "jsonrpc": "2.0",\n    "method": "info_get_deploy",\n    "params": {\n        "deploy_hash": "ec2d477a532e00b08cfa9447b7841a645a27d34ee12ec55318263617e5740713"\n    }\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"JSON-RPC Response"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id": 2,\n    "jsonrpc": "2.0",\n    "result": {\n        "api_version": "1.0.0",\n        "deploy": {\n            "approvals": [\n                {\n                    "signature": "130 chars",\n                    "signer": "010f50b0116f213ef65b99d1bd54483f92bf6131de2f8aceb7e3f825a838292150"\n                }\n            ],\n            "hash": "ec2d477a532e00b08cfa9447b7841a645a27d34ee12ec55318263617e5740713",\n            "header": {\n                "account": "010f50b0116f213ef65b99d1bd54483f92bf6131de2f8aceb7e3f825a838292150",\n                "body_hash": "da35b095640a403324306c59ac6f18a446dfcc28faf753ce58b96b635587dd8e",\n                "chain_name": "casper-net-1",\n                "dependencies": [],\n                "gas_price": 1,\n                "timestamp": "2021-04-20T18:04:40.333Z",\n                "ttl": "1h"\n            },\n            "payment": {\n                "ModuleBytes": {\n                    "args": [\n                        [\n                            "amount",\n                            {\n                                "bytes": "021027",\n                                "cl_type": "U512",\n                                "parsed": "10000"\n                            }\n                        ]\n                    ],\n                    "module_bytes": ""\n                }\n            },\n            "session": {\n                "Transfer": {\n                    "args": [\n                        [\n                            "amount",\n                            {\n                                "bytes": "0400f90295",\n                                "cl_type": "U512",\n                                "parsed": "2500000000"\n                            }\n                        ],\n                        [\n                            "target",\n                            {\n                                "bytes": "8ae68a6902ff3c029cea32bb67ae76b25d26329219e4c9ceb676745981fd3668",\n                                "cl_type": {\n                                    "ByteArray": 32\n                                },\n                                "parsed": "8ae68a6902ff3c029cea32bb67ae76b25d26329219e4c9ceb676745981fd3668"\n                            }\n                        ],\n                        [\n                            "id",\n                            {\n                                "bytes": "00",\n                                "cl_type": {\n                                    "Option": "U64"\n                                },\n                                "parsed": null\n                            }\n                        ]\n                    ]\n                }\n            }\n        },\n        "execution_results": [\n            {\n                "block_hash": "7c7e9b0f087bba5ce6fc4bd067b57f69ea3c8109157a3ad7f6d98b8da77d97f9",\n                "result": {\n                    "Success": {\n                        "cost": "10000",\n                        "effect": {\n                            "operations": [\n                                {\n                                    "key": "hash-d13610d5930fdab36fc25838bc8b4b77fdb4859755dd628c2d30e2a6dfc86a8c",\n                                    "kind": "Read"\n                                },\n                                {\n                                    "key": "account-hash-8ae68a6902ff3c029cea32bb67ae76b25d26329219e4c9ceb676745981fd3668",\n                                    "kind": "Read"\n                                },\n                                {\n                                    "key": "balance-39b6cc617efddbcc5e989c9eb73ddb5d825bb1070309e7429c029826074e038a",\n                                    "kind": "Read"\n                                },\n                                {\n                                    "key": "balance-9e90f4bbd8f581816e305eb7ea2250ca84c96e43e8735e6aca133e7563c6f527",\n                                    "kind": "Write"\n                                },\n                                {\n                                    "key": "deploy-ec2d477a532e00b08cfa9447b7841a645a27d34ee12ec55318263617e5740713",\n                                    "kind": "Write"\n                                },\n                                {\n                                    "key": "balance-34ec8bcae2675d16bad7e8ba10fada1e50dacf3935ce3b12c25a5bf000fefc76",\n                                    "kind": "Write"\n                                },\n                                {\n                                    "key": "transfer-8d81f4a1411d9481aed9c68cd700c39d870757b0236987bb6b7c2a7d72049c0e",\n                                    "kind": "Write"\n                                },\n                                {\n                                    "key": "hash-1e13f06cb64bcbf46348dc53c35444da5afc956cfd764cbc3399dc71692e0bd8",\n                                    "kind": "Read"\n                                },\n                                {\n                                    "key": "balance-6f4026262a505d5e1b0e03b1e3b7ab74a927f8f2868120cf1463813c19acb71e",\n                                    "kind": "Write"\n                                }\n                            ],\n                            "transforms": [\n                                {\n                                    "key": "balance-39b6cc617efddbcc5e989c9eb73ddb5d825bb1070309e7429c029826074e038a",\n                                    "transform": "Identity"\n                                },\n                                {\n                                    "key": "deploy-ec2d477a532e00b08cfa9447b7841a645a27d34ee12ec55318263617e5740713",\n                                    "transform": {\n                                        "WriteDeployInfo": {\n                                            "deploy_hash": "ec2d477a532e00b08cfa9447b7841a645a27d34ee12ec55318263617e5740713",\n                                            "from": "account-hash-b0049301811f23aab30260da66927f96bfae7b99a66eb2727da23bf1427a38f5",\n                                            "gas": "10000",\n                                            "source": "uref-9e90f4bbd8f581816e305eb7ea2250ca84c96e43e8735e6aca133e7563c6f527-007",\n                                            "transfers": ["transfer-8d81f4a1411d9481aed9c68cd700c39d870757b0236987bb6b7c2a7d72049c0e"]\n                                        }\n                                    }\n                                },\n                                {\n                                    "key": "hash-1e13f06cb64bcbf46348dc53c35444da5afc956cfd764cbc3399dc71692e0bd8",\n                                    "transform": "Identity"\n                                },\n                                {\n                                    "key": "transfer-8d81f4a1411d9481aed9c68cd700c39d870757b0236987bb6b7c2a7d72049c0e",\n                                    "transform": {\n                                        "WriteTransfer": {\n                                            "amount": "2500000000",\n                                            "deploy_hash": "ec2d477a532e00b08cfa9447b7841a645a27d34ee12ec55318263617e5740713",\n                                            "from": "account-hash-b0049301811f23aab30260da66927f96bfae7b99a66eb2727da23bf1427a38f5",\n                                            "gas": "0",\n                                            "id": null,\n                                            "source": "uref-9e90f4bbd8f581816e305eb7ea2250ca84c96e43e8735e6aca133e7563c6f527-007",\n                                            "target": "uref-6f4026262a505d5e1b0e03b1e3b7ab74a927f8f2868120cf1463813c19acb71e-004",\n                                            "to": "account-hash-8ae68a6902ff3c029cea32bb67ae76b25d26329219e4c9ceb676745981fd3668"\n                                        }\n                                    }\n                                },\n                                {\n                                    "key": "balance-34ec8bcae2675d16bad7e8ba10fada1e50dacf3935ce3b12c25a5bf000fefc76",\n                                    "transform": {\n                                        "AddUInt512": "10000"\n                                    }\n                                },\n                                {\n                                    "key": "hash-d13610d5930fdab36fc25838bc8b4b77fdb4859755dd628c2d30e2a6dfc86a8c",\n                                    "transform": "Identity"\n                                },\n                                {\n                                    "key": "balance-6f4026262a505d5e1b0e03b1e3b7ab74a927f8f2868120cf1463813c19acb71e",\n                                    "transform": {\n                                        "AddUInt512": "2500000000"\n                                    }\n                                },\n                                {\n                                    "key": "account-hash-8ae68a6902ff3c029cea32bb67ae76b25d26329219e4c9ceb676745981fd3668",\n                                    "transform": "Identity"\n                                },\n                                {\n                                    "key": "balance-9e90f4bbd8f581816e305eb7ea2250ca84c96e43e8735e6aca133e7563c6f527",\n                                    "transform": {\n                                        "WriteCLValue": {\n                                            "bytes": "0ee0bff9d5085bc138938d44c64d31",\n                                            "cl_type": "U512",\n                                            "parsed": "999999999999999999999994999980000"\n                                        }\n                                    }\n                                }\n                            ]\n                        },\n                        "transfers": ["transfer-8d81f4a1411d9481aed9c68cd700c39d870757b0236987bb6b7c2a7d72049c0e"]\n                    }\n                }\n            }\n        ]\n    }\n}\n'))))}u.isMDXComponent=!0}}]);